import{j as t,r as h,R as D}from"./react-ePaza90U.js";import{c as Q}from"./react-dom-BGCucnFv.js";import{L as X,B as Z}from"./react-router-dom-hlOzkE61.js";import{B as S,C as O,R as v,a as k,N as y,b as A,F as B}from"./react-bootstrap-JrysSMUi.js";import{a as ee,d as te,e as T}from"./react-router-CSlUcBGA.js";import{u as f,a as I,P as ae}from"./react-redux-Ce23xZ5m.js";import{c as P,a as se}from"./@reduxjs-CJetLCaM.js";import{a as ie}from"./axios-Cm0UX6qg.js";import"./classnames-C9FZUsQl.js";import"./scheduler-CzFDRTuY.js";import"./@remix-run-DyRdwddT.js";import"./@restart-BR1W1S6M.js";import"./dom-helpers-BCHGzjX0.js";import"./prop-types-ZMHxiqrO.js";import"./prop-types-extra-_x66_ok4.js";import"./uncontrollable-CNb32MsV.js";import"./@babel-XUcqRoeX.js";import"./react-transition-group-DoHwZBwe.js";import"./use-sync-external-store-R5Bn9tbY.js";import"./redux-DITMfSWq.js";import"./immer-D6jAg06p.js";import"./reselect-DJRGOWkq.js";import"./redux-thunk-ClJT1hhx.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function a(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=a(s);fetch(s.href,i)}})();const ne="/",le="/speech-therapy",oe="/mainMenu",re="/debug",_={START_APP_ROUTE:ne,BASE_ROUTE:le,MAIN_MENU_ROUTE:oe,DEBUG_ROUTE:re},ce=()=>{const e=ee();return{onClickNavigateToPath:a=>{e(a)}}},R=e=>{const{id:a,classStyle:n,children:s,path:i,type:o,onClick:c,isDisabled:d}=e,{onClickNavigateToPath:l}=ce();return t.jsx(t.Fragment,{children:o==="button"&&c?t.jsx(S,{id:a,type:"button",variant:"primary",className:`${n}`,onTouchEnd:c,disabled:!!d,children:s}):o==="button"&&!c?t.jsx(S,{id:a,type:"button",variant:"primary",className:`${n}`,onTouchEnd:()=>l(i),disabled:!!d,children:s}):t.jsx(S,{id:a,type:o,variant:"primary",className:`${n}`,disabled:!!d,children:s})})},de="_container_yjrep_19",ue="_row_yjrep_39",he="_rowTitle_yjrep_51",pe="_rowButton_yjrep_65",me="_col_yjrep_73",be="_button_yjrep_85",xe="_buttonText_yjrep_103",p={container:de,row:ue,rowTitle:he,rowButton:pe,col:me,button:be,buttonText:xe},ge=()=>t.jsx(t.Fragment,{children:t.jsxs(O,{fluid:!0,className:p.container,children:[t.jsx(v,{className:`${p.row} ${p.rowTitle}`,children:t.jsx(k,{className:p.col,children:t.jsx("p",{children:"Ejercicios Logopedia"})})}),t.jsx(v,{className:`${p.row} ${p.rowButton}`,children:t.jsx(k,{className:p.col,children:t.jsx(R,{id:"start",classStyle:p.button,path:"/mainMenu",type:"button",isDisabled:!1,children:t.jsx("p",{className:p.buttonText,children:"Comenzar"})})})})]})}),ve={isOptionChecked:!1},w=P({name:"menuState",initialState:ve,reducers:{setIsOptionChecked:(e,a)=>{e.isOptionChecked=a.payload}}}),{setIsOptionChecked:L}=w.actions,ke=w.reducer,je=()=>{const[e,a]=h.useState(1),[n,s]=h.useState(""),{printDebug:i}=h.useContext($),o=f(),c=()=>{a(u=>u+1),l()},d=()=>{a(u=>u-1),l()},l=()=>{o(L(!1))};return h.useEffect(()=>{(async()=>{try{const u=await ie.get("https://speech-therapy-server.onrender.com/api/data");s(u.data.message),console.log("Inside useEffect received data => "+u.data.message),i("Inside useEffect received data => "+u.data.message)}catch(u){console.error("Error al obtener datos del servidor:",u)}})()},[]),{menuNumber:e,handleNextButtonClick:c,handlePreviousButtonClick:d}},Ne=e=>{const{links:a}=e;return t.jsx(y,{collapseOnSelect:!0,expand:"md",bg:"dark",children:t.jsxs(O,{style:{width:"100%"},children:[t.jsx(y.Brand,{style:{color:"white",fontWeight:"bold"},href:"#home",children:"Logopedia"}),t.jsx(y.Toggle,{style:{backgroundColor:"white"},"aria-controls":"responsive-navbar-nav"}),t.jsx(y.Collapse,{id:"responsive-navbar-nav",children:t.jsx(A,{className:"justify-content-end",style:{width:"100%",color:"white",fontWeight:"bold"},children:a.map((n,s)=>t.jsx(A.Link,{style:{color:"white",fontWeight:"bold"},href:n.href,children:n.label},s))})})]})})},Ce="_menuView_o2kvl_1",Se="_container_o2kvl_13",ye="_col_o2kvl_33",fe="_content_o2kvl_45",_e="_title_o2kvl_63",Ee="_buttonDiv_o2kvl_77",Me="_button_o2kvl_77",Oe="_buttonText_o2kvl_107",b={menuView:Ce,container:Se,col:ye,content:fe,title:_e,buttonDiv:Ee,button:Me,buttonText:Oe},j=e=>{const{title:a,navLinks:n,children:s,buttons:i}=e,o=I(c=>c.menuState.isOptionChecked);return t.jsxs("div",{className:b.menuView,children:[t.jsx(Ne,{links:n}),t.jsx(O,{fluid:!0,className:b.container,children:t.jsx(v,{className:`${b.content}`,children:t.jsxs(k,{className:"p-0",children:[t.jsx(v,{children:t.jsx(k,{children:t.jsx("h1",{className:b.title,children:a})})}),t.jsx(v,{children:t.jsx(k,{className:"p-10",children:t.jsx("div",{children:s})})}),t.jsx(v,{children:t.jsx(k,{className:"p-10",children:t.jsx("div",{className:b.buttonDiv,children:i.map((c,d)=>t.jsx(R,{id:c.id,classStyle:b.button,onClick:c.onClick,path:c.path,type:"button",isDisabled:!o,children:t.jsx("p",{className:b.buttonText,children:c.label})},d))})})})]})})})]})},Te={variables:{task:"",mode:"",source:"",responseMode:"",algorithm:""}},U=P({name:"facialModuleState",initialState:Te,reducers:{setTask:(e,a)=>{e.variables.task=a.payload},setMode:(e,a)=>{e.variables.mode=a.payload},setSource:(e,a)=>{e.variables.source=a.payload},setResponseMode:(e,a)=>{e.variables.responseMode=a.payload},setAlgorithm:(e,a)=>{e.variables.algorithm=a.payload}}}),{setTask:Pe,setMode:De,setSource:Ae,setResponseMode:Be,setAlgorithm:Ie}=U.actions,Re=U.reducer,we=()=>{const e=f(),a=(l,u)=>{switch(d(),u){case"task-id":n(l.target.value);break;case"mode-id":s(l.target.value);break;case"source-id":i(l.target.value);break;case"response-id":o(l.target.value);break;case"algorithm-id":c(l.target.value);break}},n=l=>{e(Pe(l))},s=l=>{e(De(l))},i=l=>{e(Ae(l))},o=l=>{e(Be(l))},c=l=>{e(Ie(l))},d=()=>{e(L(!0))};return{handleOptionChange:a}},N=e=>{const{variableId:a,items:n}=e,{handleOptionChange:s}=we();return t.jsxs(t.Fragment,{children:[t.jsx("h4",{children:"Seleccione una de las siguientes opciones: "}),t.jsx(B,{children:t.jsx("div",{className:"mb-3",children:n.map((i,o)=>t.jsx(B.Check,{type:"radio",id:a,label:i.label,value:i.label,name:"options",onChange:c=>s(c,a)},o))},"default-radio")})]})},Le=e=>{const{handleNextButtonClick:a}=e,n=[{label:"Debug",href:"/speech-therapy/debug"},{label:"Salir",href:"/"}],s=[{label:"Detectar la cara"},{label:"Detectar la persona"},{label:"Detectar puntos clave de la cara"},{label:"Detectar la expresi\xF3n facial"},{label:"Detectar la edad y el g\xE9nero"},{label:"Reconocimiento facial"},{label:"Eliminar fondo"}],i=[{id:"next",path:"/mainMenu",label:"Siguiente",onClick:a}];return t.jsx(j,{title:"1.- TAREA",navLinks:n,buttons:i,children:t.jsx(N,{variableId:"task-id",items:s})})},Ue=e=>{const{handleNextButtonClick:a,handlePreviousButtonClick:n}=e,s=[{label:"Salir",href:"/"}],i=[{label:"Modo imagen"},{label:"Modo v\xEDdeo"}],o=[{id:"previous",path:"/mainMenu",label:"Anterior",onClick:n},{id:"next",path:"/mainMenu",label:"Siguiente",onClick:a}];return t.jsx(j,{title:"2.- MODO",navLinks:s,buttons:o,children:t.jsx(N,{variableId:"mode-id",items:i})})},Ve=e=>{const{handleNextButtonClick:a,handlePreviousButtonClick:n}=e,s=[{label:"Salir",href:"/"}],i=[{label:"Respuesta en texto"},{label:"Respuesta sobre imagen"}],o=[{id:"previous",path:"/mainMenu",label:"Anterior",onClick:n},{id:"next",path:"/mainMenu",label:"Siguiente",onClick:a}];return t.jsx(j,{title:"4.- RESPUESTA",navLinks:s,buttons:o,children:t.jsx(N,{variableId:"algorithm-id",items:i})})},He=e=>{const{handleNextButtonClick:a,handlePreviousButtonClick:n}=e,s=[{label:"Salir",href:"/"}],i=[{label:"Subir im\xE1genes"},{label:"Tomar foto"}],o=[{id:"previous",path:"/mainMenu",label:"Anterior",onClick:n},{id:"next",path:"/mainMenu",label:"Siguiente",onClick:a}];return t.jsx(j,{title:"3.- FUENTE IMAGEN",navLinks:s,buttons:o,children:t.jsx(N,{variableId:"source-id",items:i})})},qe=e=>{const{handleNextButtonClick:a,handlePreviousButtonClick:n}=e,s=[{label:"Salir",href:"/"}],i=[{label:"Subir v\xEDdeo"},{label:"Grabar v\xEDdeo"}],o=[{id:"previous",path:"/mainMenu",label:"Anterior",onClick:n},{id:"next",path:"/mainMenu",label:"Siguiente",onClick:a}];return t.jsx(j,{title:"3.- FUENTE V\xCDDEO",navLinks:s,buttons:o,children:t.jsx(N,{variableId:"source-id",items:i})})},$e=e=>{let a;const{handleNextButtonClick:n,handlePreviousButtonClick:s}=e,i=I(o=>o.facialModuleState.variables.mode);switch(console.log("+++ Inside SourceMenuView - facialModuleMode => "+i),i){case"Modo imagen":a=t.jsx(He,{handleNextButtonClick:n,handlePreviousButtonClick:s});break;case"Modo v\xEDdeo":a=t.jsx(qe,{handleNextButtonClick:n,handlePreviousButtonClick:s});break;default:a=null}return t.jsx("div",{children:a})},Fe=e=>{const{handleNextButtonClick:a,handlePreviousButtonClick:n}=e,s=[{label:"Salir",href:"/"}],i=[{label:"YOLOv8"},{label:"InsightFace"}],o=[{id:"previous",path:"/mainMenu",label:"Anterior",onClick:n},{id:"finish",path:"/mainMenu",label:"Acabar",onClick:a}];return t.jsx(j,{title:"5.- ALGORITMO",navLinks:s,buttons:o,children:t.jsx(N,{variableId:"response-id",items:i})})},Ge=()=>{let e;const{menuNumber:a,handleNextButtonClick:n,handlePreviousButtonClick:s}=je();switch(a){case 1:e=t.jsx(Le,{handleNextButtonClick:n});break;case 2:e=t.jsx(Ue,{handleNextButtonClick:n,handlePreviousButtonClick:s});break;case 3:e=t.jsx($e,{handleNextButtonClick:n,handlePreviousButtonClick:s});break;case 4:e=t.jsx(Ve,{handleNextButtonClick:n,handlePreviousButtonClick:s});break;case 5:e=t.jsx(Fe,{handleNextButtonClick:n,handlePreviousButtonClick:s});break;default:e=null}return t.jsx("div",{children:e})},Ke=({msg:e})=>t.jsx(t.Fragment,{children:t.jsx("div",{className:"debug-container",children:t.jsxs("div",{className:"debug-container-grid",children:[t.jsx("div",{className:"debug-container-grid-item-traza",children:t.jsx("ul",{children:e.map((a,n)=>a&&t.jsx("li",{children:a},n))})}),t.jsx("div",{className:"debug-container-grid-item-input-btns",children:t.jsx("div",{className:"debug-container-grid-item-input-field",children:t.jsxs("div",{className:"input-group mb-3",children:[t.jsx("div",{className:"input-group-prepend",children:t.jsx("span",{className:"input-group-text",id:"inputGroup-sizing-default",children:"UID"})}),t.jsx("input",{type:"number",name:"uid",placeholder:"UID del usuario que ha realizado test usabilidad",pattern:"^[0-9]+$",title:"Solo se permiten n\xFAmeros",className:"form-control","aria-label":"Default","aria-describedby":"inputGroup-sizing-default",required:!0}),t.jsx(X,{to:"/",children:t.jsx(S,{style:{marginLeft:"10px"},children:"Volver"})})]})})})]})})});var x=(e=>(e.SEND_SPEECH="send-msg",e.START_SPEECH="start-saying-msg",e.END_SPEECH="end-saying-msg",e.NONE="none",e))(x||{}),m=(e=>(e.LOADING="loading",e.OK="ok",e.NOT_OK="not-ok",e))(m||{}),E=(e=>(e.MICROPHONE_OPENED="opened",e.MICROPHONE_CLOSED="closed",e))(E||{});const V={data:{intentType:"",userRequest:""},voiceAPIStatus:m.LOADING,voiceMicroStatus:E.MICROPHONE_CLOSED,voiceMsgProps:{body:"",status:x.NONE},deviceId:"1",processingUserRequest:!1},H=P({name:"voiceState",initialState:V,reducers:{setVoiceAPIStatus:(e,a)=>{e.voiceAPIStatus=a.payload},setVoiceMicroStatus:(e,a)=>{e.voiceMicroStatus=a.payload},setVoiceMsgBody:(e,a)=>{e.voiceMsgProps.body=a.payload},setVoiceMsgStatus:(e,a)=>{e.voiceMsgProps.status=a.payload},setDeviceId:(e,a)=>{e.deviceId=a.payload},setProcessingUserRequest:(e,a)=>{e.processingUserRequest=a.payload},setUserSpeechData:(e,a)=>{e.data=a.payload},resetUserSpeechData:e=>{e.data=V.data}}}),{setVoiceAPIStatus:M,setVoiceMicroStatus:q,setVoiceMsgBody:ft,setVoiceMsgStatus:C,setDeviceId:ze,setProcessingUserRequest:We,setUserSpeechData:Je,resetUserSpeechData:Ye}=H.actions,Qe=H.reducer,Xe=()=>{const[e,a]=h.useState(null),[n,s]=h.useState([]),i=f(),o=h.useCallback(async()=>{l("Beginning Alexa.create"),window.Alexa?window.Alexa.create({version:"1.0"}).then(r=>{r.alexa?(a(r.alexa),r.alexa.skill.onMessage(G),r.alexa.speech.onStarted(K),r.alexa.speech.onStopped(z),r.alexa.voice.onMicrophoneOpened(W),r.alexa.voice.onMicrophoneClosed(J),l("Alexa is ready - newest version 5 :) Received initial data 45"),r.message.deviceId&&(l("Alexa Skill init data: "+r.message.deviceId),console.log("Alexa Skill init data: "+r.message.deviceId),i(ze(r.message.deviceId))),i(M(m.OK))):(l(`Alexa failed to initialize, code: ${r.code}`),i(M(m.NOT_OK)))}).catch(r=>{l(`Alexa not ready :(. Error: ${r}`),i(M(m.NOT_OK))}):i(M(m.NOT_OK))},[]),c=r=>{s(g=>[...g,r]),console.log(r)},d=()=>{s([])},l=r=>{c(typeof r!="string"?JSON.stringify(r,null,2):r)},u=r=>{r.statusCode==200?l("message was sent to backend successfully"):(i(C(x.END_SPEECH)),l("failed to send message to skill backend:"))},F=h.useCallback(async r=>{try{l("sending message to skill endpoint ==> "+JSON.stringify(r)),l("+++ INSIDE sendMessage - alexaClient ==> "+e),await e.skill.sendMessage(r,u)}catch(g){i(C(x.END_SPEECH)),l("Alexa error ==> "+g)}},[e]),G=r=>{let g;l("Web APP received a message from the skill endpoint"),l(r),r&&(g={intentType:r.intentType,userRequest:r.userRequest},i(We(!0)),i(Je(g)))},K=()=>{i(C(x.START_SPEECH))},z=()=>{i(C(x.END_SPEECH))},W=()=>{i(q(E.MICROPHONE_OPENED))},J=()=>{i(q(E.MICROPHONE_CLOSED))},Y=h.useCallback(()=>{i(Ye())},[]);return h.useEffect(()=>{o()},[]),{debugMessages:n,printDebug:l,sendMessage:F,resetVoiceIntent:Y,resetDebugMessages:d}},Ze=()=>{const e=f(),{debugMessages:a,printDebug:n,sendMessage:s,resetDebugMessages:i}=Xe();return{debugMessages:a,printDebug:n,sendLogToAlexa:async(o,c)=>{o===m.OK&&await s({intentRequest:"log-text-intent",logTxt:c})},sendTextToAlexa:async(o,c,d)=>{o===m.OK&&(e(C(x.SEND_SPEECH)),await s({intentRequest:"text-to-speech-intent",speech:c,otherInfo:d}))},resetDebugMessages:i}};D.createContext({});const $=D.createContext({});function et(){const{debugMessages:e,printDebug:a,sendLogToAlexa:n,sendTextToAlexa:s,resetDebugMessages:i}=Ze();return t.jsx(t.Fragment,{children:t.jsx($.Provider,{value:{debugMessages:e,printDebug:a,sendLogToAlexa:n,sendTextToAlexa:s,resetDebugMessages:i},children:t.jsx(Z,{basename:_.BASE_ROUTE,children:t.jsxs(te,{children:[t.jsx(T,{path:_.START_APP_ROUTE,element:t.jsx(ge,{})}),t.jsx(T,{path:_.MAIN_MENU_ROUTE,element:t.jsx(Ge,{})}),t.jsx(T,{path:_.DEBUG_ROUTE,element:t.jsx(Ke,{msg:e})})]})})})})}const tt=se({reducer:{facialModuleState:Re,menuState:ke,voiceState:Qe}});Q.createRoot(document.getElementById("root")).render(t.jsx(t.Fragment,{children:t.jsx(ae,{store:tt,children:t.jsx(et,{})})}));
