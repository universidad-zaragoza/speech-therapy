import{j as t,r as h,R as D}from"./react-ePaza90U.js";import{c as Q}from"./react-dom-BGCucnFv.js";import{L as X,B as Z}from"./react-router-dom-hlOzkE61.js";import{B as N,C as O,R as v,a as k,N as y,b as ee,F as A}from"./react-bootstrap-JrysSMUi.js";import{a as B,d as te,e as T}from"./react-router-CSlUcBGA.js";import{u as f,a as I,P as ae}from"./react-redux-Ce23xZ5m.js";import{c as P,a as se}from"./@reduxjs-CJetLCaM.js";import{a as ie}from"./axios-Cm0UX6qg.js";import"./classnames-C9FZUsQl.js";import"./scheduler-CzFDRTuY.js";import"./@remix-run-DyRdwddT.js";import"./@restart-BR1W1S6M.js";import"./dom-helpers-BCHGzjX0.js";import"./prop-types-ZMHxiqrO.js";import"./prop-types-extra-_x66_ok4.js";import"./uncontrollable-CNb32MsV.js";import"./@babel-XUcqRoeX.js";import"./react-transition-group-DoHwZBwe.js";import"./use-sync-external-store-R5Bn9tbY.js";import"./redux-DITMfSWq.js";import"./immer-D6jAg06p.js";import"./reselect-DJRGOWkq.js";import"./redux-thunk-ClJT1hhx.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function a(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=a(i);fetch(i.href,s)}})();const ne="/",oe="/speech-therapy",le="/mainMenu",re="/debug",_={START_APP_ROUTE:ne,BASE_ROUTE:oe,MAIN_MENU_ROUTE:le,DEBUG_ROUTE:re},ce=()=>{const e=B();return{onClickNavigateToPath:a=>{e(a)}}},R=e=>{const{id:a,classStyle:n,children:i,path:s,type:o,onClick:c,isDisabled:d}=e,{onClickNavigateToPath:l}=ce();return t.jsx(t.Fragment,{children:o==="button"&&c?t.jsx(N,{id:a,type:"button",variant:"primary",className:`${n}`,onTouchEnd:c,disabled:!!d,children:i}):o==="button"&&!c?t.jsx(N,{id:a,type:"button",variant:"primary",className:`${n}`,onTouchEnd:()=>l(s),disabled:!!d,children:i}):t.jsx(N,{id:a,type:o,variant:"primary",className:`${n}`,disabled:!!d,children:i})})},de="_container_yjrep_19",ue="_row_yjrep_39",he="_rowTitle_yjrep_51",pe="_rowButton_yjrep_65",me="_col_yjrep_73",be="_button_yjrep_85",xe="_buttonText_yjrep_103",p={container:de,row:ue,rowTitle:he,rowButton:pe,col:me,button:be,buttonText:xe},ge=()=>t.jsx(t.Fragment,{children:t.jsxs(O,{fluid:!0,className:p.container,children:[t.jsx(v,{className:`${p.row} ${p.rowTitle}`,children:t.jsx(k,{className:p.col,children:t.jsx("p",{children:"Ejercicios Logopedia"})})}),t.jsx(v,{className:`${p.row} ${p.rowButton}`,children:t.jsx(k,{className:p.col,children:t.jsx(R,{id:"start",classStyle:p.button,path:"/mainMenu",type:"button",isDisabled:!1,children:t.jsx("p",{className:p.buttonText,children:"Comenzar"})})})})]})}),ve={isOptionChecked:!1},w=P({name:"menuState",initialState:ve,reducers:{setIsOptionChecked:(e,a)=>{e.isOptionChecked=a.payload}}}),{setIsOptionChecked:L}=w.actions,ke=w.reducer,je=()=>{const[e,a]=h.useState(1),[n,i]=h.useState(""),{printDebug:s}=h.useContext($),o=f(),c=()=>{a(u=>u+1),l()},d=()=>{a(u=>u-1),l()},l=()=>{o(L(!1))};return h.useEffect(()=>{(async()=>{try{const u=await ie.get("https://speech-therapy-server.onrender.com/api/data");i(u.data.message),console.log("Inside useEffect received data => "+u.data.message),s("Inside useEffect received data => "+u.data.message)}catch(u){console.error("Error al obtener datos del servidor:",u)}})()},[]),{menuNumber:e,handleNextButtonClick:c,handlePreviousButtonClick:d}},Ce=e=>{const{links:a}=e,n=B(),i=o=>{n(o)},s={color:"white",fontWeight:"bold",backgroundColor:"transparent",border:"none",textDecoration:"none"};return t.jsx(y,{collapseOnSelect:!0,expand:"md",bg:"dark",children:t.jsxs(O,{style:{width:"100%"},children:[t.jsx(y.Brand,{style:{color:"white",fontWeight:"bold"},href:"#home",children:"Logopedia"}),t.jsx(y.Toggle,{style:{backgroundColor:"white"},"aria-controls":"responsive-navbar-nav"}),t.jsx(y.Collapse,{id:"responsive-navbar-nav",children:t.jsx(ee,{className:"justify-content-end",style:{width:"100%",color:"white",fontWeight:"bold"},children:a.map((o,c)=>t.jsx(N,{variant:"link",style:s,onClick:()=>{i(o.href)},children:o.label},c))})})]})})},Ne="_menuView_o2kvl_1",Se="_container_o2kvl_13",ye="_col_o2kvl_33",fe="_content_o2kvl_45",_e="_title_o2kvl_63",Ee="_buttonDiv_o2kvl_77",Me="_button_o2kvl_77",Oe="_buttonText_o2kvl_107",b={menuView:Ne,container:Se,col:ye,content:fe,title:_e,buttonDiv:Ee,button:Me,buttonText:Oe},j=e=>{const{title:a,navLinks:n,children:i,buttons:s}=e,o=I(c=>c.menuState.isOptionChecked);return t.jsxs("div",{className:b.menuView,children:[t.jsx(Ce,{links:n}),t.jsx(O,{fluid:!0,className:b.container,children:t.jsx(v,{className:`${b.content}`,children:t.jsxs(k,{className:"p-0",children:[t.jsx(v,{children:t.jsx(k,{children:t.jsx("h1",{className:b.title,children:a})})}),t.jsx(v,{children:t.jsx(k,{className:"p-10",children:t.jsx("div",{children:i})})}),t.jsx(v,{children:t.jsx(k,{className:"p-10",children:t.jsx("div",{className:b.buttonDiv,children:s.map((c,d)=>t.jsx(R,{id:c.id,classStyle:b.button,onClick:c.onClick,path:c.path,type:"button",isDisabled:!o,children:t.jsx("p",{className:b.buttonText,children:c.label})},d))})})})]})})})]})},Te={variables:{task:"",mode:"",source:"",responseMode:"",algorithm:""}},U=P({name:"facialModuleState",initialState:Te,reducers:{setTask:(e,a)=>{e.variables.task=a.payload},setMode:(e,a)=>{e.variables.mode=a.payload},setSource:(e,a)=>{e.variables.source=a.payload},setResponseMode:(e,a)=>{e.variables.responseMode=a.payload},setAlgorithm:(e,a)=>{e.variables.algorithm=a.payload}}}),{setTask:Pe,setMode:De,setSource:Ae,setResponseMode:Be,setAlgorithm:Ie}=U.actions,Re=U.reducer,we=()=>{const e=f(),a=(l,u)=>{switch(d(),u){case"task-id":n(l.target.value);break;case"mode-id":i(l.target.value);break;case"source-id":s(l.target.value);break;case"response-id":o(l.target.value);break;case"algorithm-id":c(l.target.value);break}},n=l=>{e(Pe(l))},i=l=>{e(De(l))},s=l=>{e(Ae(l))},o=l=>{e(Be(l))},c=l=>{e(Ie(l))},d=()=>{e(L(!0))};return{handleOptionChange:a}},C=e=>{const{variableId:a,items:n}=e,{handleOptionChange:i}=we();return t.jsxs(t.Fragment,{children:[t.jsx("h4",{children:"Seleccione una de las siguientes opciones: "}),t.jsx(A,{children:t.jsx("div",{className:"mb-3",children:n.map((s,o)=>t.jsx(A.Check,{type:"radio",id:a,label:s.label,value:s.label,name:"options",onChange:c=>i(c,a)},o))},"default-radio")})]})},Le=e=>{const{handleNextButtonClick:a}=e,n=[{label:"Debug",href:"/debug"},{label:"Salir",href:"/"}],i=[{label:"Detectar la cara"},{label:"Detectar la persona"},{label:"Detectar puntos clave de la cara"},{label:"Detectar la expresi\xF3n facial"},{label:"Detectar la edad y el g\xE9nero"},{label:"Reconocimiento facial"},{label:"Eliminar fondo"}],s=[{id:"next",path:"/mainMenu",label:"Siguiente",onClick:a}];return t.jsx(j,{title:"1.- TAREA",navLinks:n,buttons:s,children:t.jsx(C,{variableId:"task-id",items:i})})},Ue=e=>{const{handleNextButtonClick:a,handlePreviousButtonClick:n}=e,i=[{label:"Salir",href:"/"}],s=[{label:"Modo imagen"},{label:"Modo v\xEDdeo"}],o=[{id:"previous",path:"/mainMenu",label:"Anterior",onClick:n},{id:"next",path:"/mainMenu",label:"Siguiente",onClick:a}];return t.jsx(j,{title:"2.- MODO",navLinks:i,buttons:o,children:t.jsx(C,{variableId:"mode-id",items:s})})},Ve=e=>{const{handleNextButtonClick:a,handlePreviousButtonClick:n}=e,i=[{label:"Salir",href:"/"}],s=[{label:"Respuesta en texto"},{label:"Respuesta sobre imagen"}],o=[{id:"previous",path:"/mainMenu",label:"Anterior",onClick:n},{id:"next",path:"/mainMenu",label:"Siguiente",onClick:a}];return t.jsx(j,{title:"4.- RESPUESTA",navLinks:i,buttons:o,children:t.jsx(C,{variableId:"algorithm-id",items:s})})},He=e=>{const{handleNextButtonClick:a,handlePreviousButtonClick:n}=e,i=[{label:"Salir",href:"/"}],s=[{label:"Subir im\xE1genes"},{label:"Tomar foto"}],o=[{id:"previous",path:"/mainMenu",label:"Anterior",onClick:n},{id:"next",path:"/mainMenu",label:"Siguiente",onClick:a}];return t.jsx(j,{title:"3.- FUENTE IMAGEN",navLinks:i,buttons:o,children:t.jsx(C,{variableId:"source-id",items:s})})},qe=e=>{const{handleNextButtonClick:a,handlePreviousButtonClick:n}=e,i=[{label:"Salir",href:"/"}],s=[{label:"Subir v\xEDdeo"},{label:"Grabar v\xEDdeo"}],o=[{id:"previous",path:"/mainMenu",label:"Anterior",onClick:n},{id:"next",path:"/mainMenu",label:"Siguiente",onClick:a}];return t.jsx(j,{title:"3.- FUENTE V\xCDDEO",navLinks:i,buttons:o,children:t.jsx(C,{variableId:"source-id",items:s})})},$e=e=>{let a;const{handleNextButtonClick:n,handlePreviousButtonClick:i}=e,s=I(o=>o.facialModuleState.variables.mode);switch(console.log("+++ Inside SourceMenuView - facialModuleMode => "+s),s){case"Modo imagen":a=t.jsx(He,{handleNextButtonClick:n,handlePreviousButtonClick:i});break;case"Modo v\xEDdeo":a=t.jsx(qe,{handleNextButtonClick:n,handlePreviousButtonClick:i});break;default:a=null}return t.jsx("div",{children:a})},Fe=e=>{const{handleNextButtonClick:a,handlePreviousButtonClick:n}=e,i=[{label:"Salir",href:"/"}],s=[{label:"YOLOv8"},{label:"InsightFace"}],o=[{id:"previous",path:"/mainMenu",label:"Anterior",onClick:n},{id:"finish",path:"/mainMenu",label:"Acabar",onClick:a}];return t.jsx(j,{title:"5.- ALGORITMO",navLinks:i,buttons:o,children:t.jsx(C,{variableId:"response-id",items:s})})},Ge=()=>{let e;const{menuNumber:a,handleNextButtonClick:n,handlePreviousButtonClick:i}=je();switch(a){case 1:e=t.jsx(Le,{handleNextButtonClick:n});break;case 2:e=t.jsx(Ue,{handleNextButtonClick:n,handlePreviousButtonClick:i});break;case 3:e=t.jsx($e,{handleNextButtonClick:n,handlePreviousButtonClick:i});break;case 4:e=t.jsx(Ve,{handleNextButtonClick:n,handlePreviousButtonClick:i});break;case 5:e=t.jsx(Fe,{handleNextButtonClick:n,handlePreviousButtonClick:i});break;default:e=null}return t.jsx("div",{children:e})},Ke=({msg:e})=>t.jsx(t.Fragment,{children:t.jsx("div",{className:"debug-container",children:t.jsxs("div",{className:"debug-container-grid",children:[t.jsx("div",{className:"debug-container-grid-item-traza",children:t.jsx("ul",{children:e.map((a,n)=>a&&t.jsx("li",{children:a},n))})}),t.jsx("div",{className:"debug-container-grid-item-input-btns",children:t.jsx("div",{className:"debug-container-grid-item-input-field",children:t.jsxs("div",{className:"input-group mb-3",children:[t.jsx("div",{className:"input-group-prepend",children:t.jsx("span",{className:"input-group-text",id:"inputGroup-sizing-default",children:"UID"})}),t.jsx("input",{type:"number",name:"uid",placeholder:"UID del usuario que ha realizado test usabilidad",pattern:"^[0-9]+$",title:"Solo se permiten n\xFAmeros",className:"form-control","aria-label":"Default","aria-describedby":"inputGroup-sizing-default",required:!0}),t.jsx(X,{to:"/",children:t.jsx(N,{style:{marginLeft:"10px"},children:"Volver"})})]})})})]})})});var x=(e=>(e.SEND_SPEECH="send-msg",e.START_SPEECH="start-saying-msg",e.END_SPEECH="end-saying-msg",e.NONE="none",e))(x||{}),m=(e=>(e.LOADING="loading",e.OK="ok",e.NOT_OK="not-ok",e))(m||{}),E=(e=>(e.MICROPHONE_OPENED="opened",e.MICROPHONE_CLOSED="closed",e))(E||{});const V={data:{intentType:"",userRequest:""},voiceAPIStatus:m.LOADING,voiceMicroStatus:E.MICROPHONE_CLOSED,voiceMsgProps:{body:"",status:x.NONE},deviceId:"1",processingUserRequest:!1},H=P({name:"voiceState",initialState:V,reducers:{setVoiceAPIStatus:(e,a)=>{e.voiceAPIStatus=a.payload},setVoiceMicroStatus:(e,a)=>{e.voiceMicroStatus=a.payload},setVoiceMsgBody:(e,a)=>{e.voiceMsgProps.body=a.payload},setVoiceMsgStatus:(e,a)=>{e.voiceMsgProps.status=a.payload},setDeviceId:(e,a)=>{e.deviceId=a.payload},setProcessingUserRequest:(e,a)=>{e.processingUserRequest=a.payload},setUserSpeechData:(e,a)=>{e.data=a.payload},resetUserSpeechData:e=>{e.data=V.data}}}),{setVoiceAPIStatus:M,setVoiceMicroStatus:q,setVoiceMsgBody:ft,setVoiceMsgStatus:S,setDeviceId:ze,setProcessingUserRequest:We,setUserSpeechData:Je,resetUserSpeechData:Ye}=H.actions,Qe=H.reducer,Xe=()=>{const[e,a]=h.useState(null),[n,i]=h.useState([]),s=f(),o=h.useCallback(async()=>{l("Beginning Alexa.create"),window.Alexa?window.Alexa.create({version:"1.0"}).then(r=>{r.alexa?(a(r.alexa),r.alexa.skill.onMessage(G),r.alexa.speech.onStarted(K),r.alexa.speech.onStopped(z),r.alexa.voice.onMicrophoneOpened(W),r.alexa.voice.onMicrophoneClosed(J),l("Alexa is ready - newest version 5 :) Received initial data 45"),r.message.deviceId&&(l("Alexa Skill init data: "+r.message.deviceId),console.log("Alexa Skill init data: "+r.message.deviceId),s(ze(r.message.deviceId))),s(M(m.OK))):(l(`Alexa failed to initialize, code: ${r.code}`),s(M(m.NOT_OK)))}).catch(r=>{l(`Alexa not ready :(. Error: ${r}`),s(M(m.NOT_OK))}):s(M(m.NOT_OK))},[]),c=r=>{i(g=>[...g,r]),console.log(r)},d=()=>{i([])},l=r=>{c(typeof r!="string"?JSON.stringify(r,null,2):r)},u=r=>{r.statusCode==200?l("message was sent to backend successfully"):(s(S(x.END_SPEECH)),l("failed to send message to skill backend:"))},F=h.useCallback(async r=>{try{l("sending message to skill endpoint ==> "+JSON.stringify(r)),l("+++ INSIDE sendMessage - alexaClient ==> "+e),await e.skill.sendMessage(r,u)}catch(g){s(S(x.END_SPEECH)),l("Alexa error ==> "+g)}},[e]),G=r=>{let g;l("Web APP received a message from the skill endpoint"),l(r),r&&(g={intentType:r.intentType,userRequest:r.userRequest},s(We(!0)),s(Je(g)))},K=()=>{s(S(x.START_SPEECH))},z=()=>{s(S(x.END_SPEECH))},W=()=>{s(q(E.MICROPHONE_OPENED))},J=()=>{s(q(E.MICROPHONE_CLOSED))},Y=h.useCallback(()=>{s(Ye())},[]);return h.useEffect(()=>{o()},[]),{debugMessages:n,printDebug:l,sendMessage:F,resetVoiceIntent:Y,resetDebugMessages:d}},Ze=()=>{const e=f(),{debugMessages:a,printDebug:n,sendMessage:i,resetDebugMessages:s}=Xe();return{debugMessages:a,printDebug:n,sendLogToAlexa:async(o,c)=>{o===m.OK&&await i({intentRequest:"log-text-intent",logTxt:c})},sendTextToAlexa:async(o,c,d)=>{o===m.OK&&(e(S(x.SEND_SPEECH)),await i({intentRequest:"text-to-speech-intent",speech:c,otherInfo:d}))},resetDebugMessages:s}};D.createContext({});const $=D.createContext({});function et(){const{debugMessages:e,printDebug:a,sendLogToAlexa:n,sendTextToAlexa:i,resetDebugMessages:s}=Ze();return t.jsx(t.Fragment,{children:t.jsx($.Provider,{value:{debugMessages:e,printDebug:a,sendLogToAlexa:n,sendTextToAlexa:i,resetDebugMessages:s},children:t.jsx(Z,{basename:_.BASE_ROUTE,children:t.jsxs(te,{children:[t.jsx(T,{path:_.START_APP_ROUTE,element:t.jsx(ge,{})}),t.jsx(T,{path:_.MAIN_MENU_ROUTE,element:t.jsx(Ge,{})}),t.jsx(T,{path:_.DEBUG_ROUTE,element:t.jsx(Ke,{msg:e})})]})})})})}const tt=se({reducer:{facialModuleState:Re,menuState:ke,voiceState:Qe}});Q.createRoot(document.getElementById("root")).render(t.jsx(t.Fragment,{children:t.jsx(ae,{store:tt,children:t.jsx(et,{})})}));
